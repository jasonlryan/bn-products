{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "products": {
      "type": "object",
      "patternProperties": {
        "^[a-z_]+$": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "pattern": "^[0-9]{2}$"
            },
            "name": {
              "type": "string"
            },
            "visibility": {
              "type": "object",
              "properties": {
                "public": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "internal": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "required": ["public", "internal"]
            },
            "stages": {
              "type": "object",
              "patternProperties": {
                "^[a-z_]+$": {
                  "type": "object",
                  "properties": {
                    "file": {
                      "type": "string",
                      "pattern": "^[0-9]{2}_[a-z_]+_[0-9]{2}_[a-z_]+\\.md$"
                    },
                    "visibility": {
                      "type": "string",
                      "enum": ["public", "internal"]
                    },
                    "order": {
                      "type": "integer",
                      "minimum": 1,
                      "maximum": 15
                    },
                    "metadata": {
                      "type": "object",
                      "properties": {
                        "category": {
                          "type": "string"
                        },
                        "priority": {
                          "type": "string",
                          "enum": ["high", "medium", "low"]
                        },
                        "reviewStatus": {
                          "type": "string",
                          "enum": ["pending", "in_review", "approved"]
                        }
                      }
                    }
                  },
                  "required": ["file", "visibility", "order"]
                }
              }
            }
          },
          "required": ["id", "name", "visibility", "stages"]
        }
      }
    },
    "globalSettings": {
      "type": "object",
      "properties": {
        "defaultVisibility": {
          "type": "string",
          "enum": ["public", "internal"]
        },
        "publicSections": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "displayOrder": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "categories": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": ["defaultVisibility", "publicSections", "displayOrder"]
    }
  },
  "required": ["products", "globalSettings"]
} 